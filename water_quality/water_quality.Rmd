---
title: "Water Quality"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
runtime: shiny
---

GROUNDWATER
===
```{r setup, include=FALSE}
library(flexdashboard)
library(tidyverse)
library(plotly)
library(shiny)

groundwater_quality <- read_csv("groundwater_quality.csv")
river_quality <- read_csv("river_quality.csv")
mean_groundwq <- groundwater_quality %>% 
  gather(key = Indicator,
         value = Total_MedVal, c(`E.coli (cfu/100ml)`, `Nitrate nitrogen (g/m3)`),
         -c(Region, Year)) %>% 
  filter(Indicator == "E.coli (cfu/100ml)") %>% 
  group_by(Year) %>% 
  na.omit() %>% 
  summarise(meanval = mean(Total_MedVal))
```

Column {.sidebar}
-----------------------------------------------------------------------
```{r}
selectInput("region", label = "Region", choices = c("All", sort(river_quality$Region)), selected = "All")

radioButtons("indicator", label = "Indicator", choices = c("E.coli", "Nitrate nitrogen"))
```


Column {data-width=650}
-----------------------------------------------------------------------

### Plot 1

```{r}
mean_vals <- rbind(pmin(mean_groundwq$meanval, 11), pmax(mean_groundwq$meanval-11, 0))

mean_vals %>% 
  barplot(names.arg=mean_groundwq$Year, col=c("green", "red"), ylim = c(0, 80))
abline(h = 11, col="red", lty=2)
```

Column {data-width=350}
-----------------------------------------------------------------------

### Chart B

```{r}

```

### Chart C

```{r}

```

RIVER
===
Column {data-width=350}
-----------------------------------------------------------------------

### Chart B

```{r}

```

### Chart C

```{r}

```

### Chart D

```{r}

```
 
 