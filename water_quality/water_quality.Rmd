---
title: "Water Quality"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
runtime: shiny
---

GROUNDWATER
===
```{r setup, include=FALSE}
library(flexdashboard)
library(tidyverse)
library(plotly)
library(highcharter)
library(shiny)

groundwater_quality <- read_csv("groundwater_quality.csv")
river_quality <- read_csv("river_quality.csv")
gwq_sites <- read_csv("groundwq_sites.csv")
river_srcs <- read_csv("river_src.csv")

gwq <- groundwater_quality %>% 
  filter(Indicator == "E.coli cfu/100ml") %>% 
  group_by(Year) %>% 
  summarise(yearlymeanval = mean(MeanVal))


gwq_regional_sites <- gwq_sites %>% 
  group_by(Region) %>% 
  summarise(TotalSites = n())

river_regional_srcs <- river_srcs %>% 
  group_by(Region) %>% 
  summarise(TotalSites = n())

# mean_vals <- rbind(pmin(mean_groundwq$meanval, 11), pmax(mean_groundwq$meanval-11, 0))
# 
# mean_vals %>%
#   barplot(names.arg=mean_groundwq$Year, col=c("green", "red"), ylim = c(0, 80))
# abline(h = 11, col="red", lty=2)
```

Column {data-width=350}
-------------------------------------
    
### No. of Wells Sampled

```{r}
renderValueBox(
  valueBox(value = sum(gwq_regional_sites$TotalSites), icon = "fas fa-heart-crack")
)
```

### No. of Source of Flow Sampled

```{r}
renderValueBox(
  valueBox(value = sum(river_regional_srcs$TotalSites),
           icon = "fa-water")
)
```
   
Column {data-width=250 .tabset .tabset-fade}
-------------------------------------
   
### E.COLI

```{r}
selectInput("region", label = "Region", choices = c("All", sort(groundwater_quality$Region)), selected = "All")
```   
 
### NITRATE NITROGEN
    
```{r}
selectInput("region", label = "Region", choices = c("All", sort(groundwater_quality$Region)), selected = "All")
```

RIVER
===
Column {data-width=350}
-----------------------------------------------------------------------

### Chart B

```{r}

```

### Chart C

```{r}

```

### Chart D

```{r}

```
 
 